<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Teste nave - Canvas HTML5</title>
        <script src="js/animacao.js"></script>
        <script src="js/teclado.js"></script>
        <script src="js/nave.js"></script>
        <script src="js/tiro.js"></script>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <canvas id="palco" width="500" height="500">
            Ops! O seu navegador parece não ter suporte para este recurso.. :(
        </canvas>
        <script>
            // Encontra o canvas e o contexo 2D
            var canvas = document.getElementById('palco');
            var context = canvas.getContext('2d');
            
            // Teclado e animação (nosso game engine)
            var teclado = new Teclado(document);
            var animacao = new Animacao(context);
            
            // Carregamos a imagem da nave
            var imgNave = new Image();
            
            // Carregamos a imagem
            imgNave.src = 'assets/images/nave.png';
            
            // Criamos o objeto Nave
            var nave = new Nave(context, teclado, imgNave);
            
            // Registramos a nave como um novo sprite
            animacao.novoSprite(nave);
            
            // Registramos a tecla que faz atirar
            teclado.disparou(ESPACO, function() {
                nave.atirar();
            });
            
            // Após carregar
            imgNave.onload = function() {
                // Centralizamos a nave na horizontal
                nave.x = canvas.width / 2 - imgNave.width / 2;
                
                // Setamos a nave embaixo da tela
                nave.y = canvas.height - imgNave.height - 10;
                
                // Definimos uma velocidade para a nossa nave
                nave.velocidade = 5;
                
                // Liga a animação
                animacao.ligar();
            }
        </script>
    </body>
</html>